(function(){var a,b,c;(function(d){function j(a,b){if(a&&a.charAt(0)==="."&&b){b=b.split("/"),b=b.slice(0,b.length-1),a=b.concat(a.split("/"));var c,d;for(c=0;d=a[c];c++)if(d===".")a.splice(c,1),c-=1;else if(d==="..")if(c!==1||a[2]!==".."&&a[0]!=="..")c>0&&(a.splice(c-1,2),c-=2);else break;a=a.join("/")}return a}function k(a,b){return function(){return i.apply(d,g.call(arguments,0).concat([a,b]))}}function l(a){return function(b){return j(b,a)}}function m(a){return function(b){e[a]=b}}function n(a){if(f.hasOwnProperty(a)){var b=f[a];delete f[a],h.apply(d,b)}return e[a]}function o(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=j(a.slice(0,e),b),a=a.slice(e+1),d=n(c),d&&d.normalize?a=d.normalize(a,l(b)):a=j(a,b)):a=j(a,b),{f:c?c+"!"+a:a,n:a,p:d}}var e={},f={},g=[].slice,h,i;if(typeof c=="function")return;h=function(a,b,c,g){var h=[],i,j,l,p,q,r;g||(g=a);if(typeof c=="function"){!b.length&&c.length&&(b=["require","exports","module"]);for(p=0;p<b.length;p++){r=o(b[p],g),l=r.f;if(l==="require")h[p]=k(a);else if(l==="exports")h[p]=e[a]={},i=!0;else if(l==="module")j=h[p]={id:a,uri:"",exports:e[a]};else if(e.hasOwnProperty(l)||f.hasOwnProperty(l))h[p]=n(l);else if(r.p)r.p.load(r.n,k(g,!0),m(l),{}),h[p]=e[l];else throw a+" missing "+l}q=c.apply(e[a],h),a&&(j&&j.exports!==d?e[a]=j.exports:i||(e[a]=q))}else a&&(e[a]=c)},a=i=function(a,b,c,e){return typeof a=="string"?n(o(a,b).f):(a.splice||(b.splice?(a=b,b=arguments[2]):a=[]),e?h(d,a,b,c):setTimeout(function(){h(d,a,b,c)},15),i)},i.config=function(){return i},b||(b=i),c=function(a,b,d){b.splice||(d=b,b=[]),c.unordered?f[a]=[a,b,d]:h(a,b,d)},c.amd={jQuery:!0}})(),c("lib/requirejs/almond",function(){}),c("editor/ckeditor_config",{language:"no",forcePasteAsPlainText:!0,removePlugins:"about,elementspath,flash,font,forms,newpage,pagebreak,preview,print,save,scayt,smiley,showblocks,sourcearea,wsc",toolbar:"Content",toolbar_Inline:[["Cut","Copy","Paste","-","Undo","Redo","-","Find","Replace"],["Bold","Italic","-","TextColor","BGColor","-","Link","Unlink","-","Image"]],toolbar_Content:[["Cut","Copy","Paste","-","Undo","Redo","-","Find","Replace","-","Link","Unlink","-","Image","Table","HorizontalRule"],["Format","-","Bold","Italic","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","NumberedList","BulletedList","Outdent","Indent","-","TextColor","BGColor"]],format_tags:"p;h1;h2;h3;h4;h5;h6;pre",resize_minWidth:600,resize_maxWidth:600,resize_minHeight:100,resize_maxHeight:380,customConfig:""}),c("editor/ui",[],function(){var a={};return a.init=function(a){var b={},c=a.opts.root,d=a.window.jQuery;return b.buttons={edit:d('<span class="mm-edit" />').append('<img src="'+c+'img/edit.png" alt="Rediger" />'),add:d('<div class="mm-add" />').append('<button type="button" class="add">Legg til ny</button>'),remove:d('<span class="mm-remove" />').append('<img src="'+c+'img/delete.png" alt="Slett" />')},b.overlay=d('<div class="mm-overlay" />').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#ffffff",opacity:.5,zIndex:900}).bind("mousedown selectstart",function(a){return a.preventDefault(),!1}),b},a}),c("locales",{no:{days_short:["søn","man","tir","ons","tor","fre","lør"],days_long:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],months_short:["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"],months_long:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],format:"%d/%m/%Y"},sv:{days_short:["sön","mån","tis","ons","tors","fre","lör"],days_long:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],months_short:["jan","febr","mars","apr","maj","juni","juli","aug","sept","okt","nov","dec"],months_long:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],format:"%d/%m/%Y"},da:{days_short:["søn","man","tir","ons","tor","fre","lør"],days_long:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],months_short:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],months_long:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],format:"%d/%m/%Y"},en:{days_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days_long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months_long:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"%m/%d/%Y"}}),c("util/browser",{support:{namespaces:function(){var a=document.createElement("mm:content");return a.nodeName.toLowerCase()=="mm:content"}()}}),c("plugins/editables",["../util/browser"],function(a){function e(a){return typeof a.jquery!="undefined"&&(a=a[0]),b.inArray(a.nodeName.toLowerCase(),d)!==-1}var b,c,d=a.support.namespaces?["mm:content"]:["content"];return c=function(a){this.editor=a,b(c.SELECTOR).append(a.ui.buttons.edit.clone()).find("span.mm-edit").click(b.proxy(this.edit,this))},c.SELECTOR="h1[editable], h2[editable], h3[editable], h4[editable], h5[editable], h6[editable], td[editable], p[editable], span[editable], mm\\:content, content",c.prototype.edit=function(a){var c=b(a.target).closest(".mm-edit"),d=c.parent(),f=e(d)?"Block":"Inline";this.editor.toggleOverlay(!0);if(this.editor.getCurrentEditorPane()!==null)return!1;c.detach();var g=b.proxy(function(a,d){a.toggleOverlay(!1),b(d.getElement()).append(c.clone(!0))},this);this.editor.getEditorPane(f,{handleSave:g,handleCancel:g}).setElement(d).show()},{register:function(a){b=a.window.jQuery,new c(a)}}}),c("plugins/snippets",[],function(){var a,b;return b=function(b){var c=a.proxy(this.remove,this),d=a.proxy(this.duplicate,this);this.editor=b,a("mm\\:snippet, snippet").each(function(){var d=a(this),e=d.prev(),f=!d.hasClass("mm-duplicated")&&!e.hasClass("mm-duplicated");d.append(b.ui.buttons.remove.clone()).find("span.mm-remove").css("display",f?"none":"").click(c)}).filter(":not(.mm-duplicated)").append(b.ui.buttons.add).find("button.add").click(d)},b.prototype.duplicate=function(b){var c=a(b.target).parent().parent(),d=null;if(this.editor.getCurrentEditorPane()!==null)return!1;c.find("span.mm-remove").show(),d=c.clone(!0),c.addClass("mm-duplicated").find("div.mm-add").remove().end().after(d),this.editor.trigger("contentchanged.editor")},b.prototype.remove=function(b){var c=a(b.target).closest(".mm-remove").parent(),d=c.prev(),e=c.hasClass("mm-duplicated"),f=!1;if(this.editor.getCurrentEditorPane()!==null)return!1;e?f=!0:d.hasClass("mm-duplicated")&&(d.append(c.find("div.mm-add")).removeClass("mm-duplicated"),f=!0);if(f===!0){var g=c.next();e&&!d.hasClass("mm-duplicated")&&!g.hasClass("mm-duplicated")?g.find("span.mm-remove").hide():!e&&!d.hasClass("mm-duplicated")&&!d.prev().hasClass("mm-duplicated")&&d.find("span.mm-remove").hide(),c.remove(),this.editor.trigger("contentchanged.editor")}},{register:function(c){a=c.window.jQuery,new b(c)}}}),c("util/dom",[],function(){function a(a,b){switch(a.nodeType){case this.ELEMENT_NODE:var c=this.createElement(a.nodeName);if(a.attributes&&a.attributes.length>0){var d,e;for(var f=0;f<a.attributes.length;f++)d=a.attributes[f].nodeName,e=a.attributes[f].nodeValue,!d.match(/^(aria|jquery|complete|loop)/i)&&d!="implementation"&&e&&e!="null"&&c.setAttribute(d,e);a.style&&a.style.cssText&&(c.style.cssText=a.style.cssText)}if(b&&a.childNodes&&a.childNodes.length>0)for(var f=0;f<a.childNodes.length;f++)c.appendChild(this.importNode(a.childNodes[f],b));return c;case this.TEXT_NODE:case this.CDATA_SECTION_NODE:case this.COMMENT_NODE:return this.createTextNode(a.nodeValue)}}return{assignCustomImportNode:function(b){b.ELEMENT_NODE||(b.ELEMENT_NODE=1,b.ATTRIBUTE_NODE=2,b.TEXT_NODE=3,b.CDATA_SECTION_NODE=4,b.ENTITY_REFERENCE_NODE=5,b.ENTITY_NODE=6,b.PROCESSING_INSTRUCTION_NODE=7,b.COMMENT_NODE=8,b.DOCUMENT_NODE=9,b.DOCUMENT_TYPE_NODE=10,b.DOCUMENT_FRAGMENT_NODE=11,b.NOTATION_NODE=12),b.importNode=a},injectJavaScript:function(a,b,c){var d=a.ownerDocument.createElement("script");return d.setAttribute("type","text/javascript"),typeof c=="function"&&(d.onreadystatechange=d.onload=function(b){b=b||a.ownerDocument.parentWindow.event;if(b.type=="load"||b.type=="readystatechange"&&(d.readyState=="complete"||d.readyState=="loaded"))c(b),d.onreadystatechange=d.onload=null}),d.setAttribute("src",b),a.appendChild(d)},injectStyleSheet:function(a,b){var c=a.ownerDocument.createElement("link");return c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",b),a.appendChild(c)},updateAttribute:function(a,b,c){c&&c!==""?a.setAttribute(b,c):(b=="class"&&(a.className=""),a.removeAttribute(b))},hasAttribute:function(a,b){return typeof a.hasAttribute=="function"?a.hasAttribute(b):typeof a.outerHTML!="undefined"?!!a.outerHTML.match(new RegExp(b+"=","i")):typeof a[b]!="undefined"}}}),c("editor/panes",["./ckeditor_config","../util/dom"],function(a,b){function c(c){function k(a){var b=a.editor,c=a.data;b.config.enterMode==d.ENTER_BR&&(c.dataValue=c.dataValue.replace(/^\s*<p>\s*([\s\S]+?)\s*<\/p>\s*$/i,"$1"))}function m(a){a&&f(a).css({position:"fixed",top:0})}function n(b){if(typeof b.window=="undefined"||typeof b.window.$.document=="undefined"){setTimeout(function(){n(b)},100);return}var c=b.container.$,d=b.window.$,e=d.innerHeight||0,f=d.document.height||0,g=c.offsetHeight||0,h=f-e;h>0&&b.resize(a.resize_maxWidth,Math.max(a.resize_minHeight,Math.min(g+h,a.resize_maxHeight)))}var d=c.CKEDITOR,e=c.document,f=c.jQuery,g={},h=null,i="single",j={Block:{toolbar:"Content",enterMode:d.ENTER_P,height:"380px"},Inline:{toolbar:"Inline",enterMode:d.ENTER_BR,shiftEnterMode:d.ENTER_BR,height:"350px",image_previewText:"&nbsp;"}};d.on("dialogDefinition",function(a){var b=a.data.name,c=a.data.definition,d;if(b=="link"){c.removeContents("target");var e=c.getContents("advanced");f.each(["advId","advAccessKey","advTabIndex","advName","advLangDir","advLangCode","advCharset","advContentType"],function(a,b){e.remove(b)})}else b=="image"?(d=c.getContents("info"),d.remove("txtBorder"),d.remove("txtHSpace"),d.remove("txtVSpace")):b=="table"&&(d=c.getContents("info"),d.remove("cmbAlign"))});var l=function(b,g){var h=this,i=f('<div class="mm-editor" />').append('<div class="mm-editor-content" />').append('<button type="submit" class="save">Lagre</button>').append(" eller ").append('<button type="button" class="cancel">avbryt</button>').css("left","-1000px").prependTo(e.body);g=f.extend({},g),typeof g.save=="function"&&i.bind("EditorPane.save",g.save),typeof g.cancel=="function"&&i.bind("EditorPane.cancel",g.cancel),i.data("visibleLeft",f(c.document).width()/2-i.outerWidth(!0)/2),this.type=b,this.pane=i[0],this.editor=d.appendTo(i.find("div.mm-editor-content")[0],f.extend({},a,j[b],{resize_maxHeight:c.document.height-250,on:{pluginsLoaded:function(a){typeof g.loaded=="function"&&g.loaded.call(h)},instanceCreated:function(){},instanceReady:function(a){typeof g.ready=="function"&&g.ready.call(h)},getData:k}})),i.find("button").click(function(a){var b=f(this).is(".save")?"save":"cancel",c=new f.Event("EditorPane."+b);i.trigger(c,[h]),c.isDefaultPrevented()||h.hide()})};return l.prototype={setElement:function(a){return this.element=f(a),this.editor.setData(this.element.html()),this},getElement:function(){return this.element&&this.element[0]||null},getSelectedElement:function(a){var b=this.getParentEditor().document,c=this.getParentEditor().getSelection(),e;return c===null&&(c=new d.dom.selection(b),c.selectElement(b.getElementsByTag(a).getItem(0))),c.getSelectedElement()||c.getStartElement()},getType:function(){return this.type},show:function(){var a=this,b=f(this.pane);return i=="single"&&h!==null&&this.type!=h.getType()&&h.hide(),m(this.pane),b.hide().css({left:b.data("visibleLeft")}).slideDown(150,function(){n(a.editor),a.editor.focus(),h=a}),this},showDialog:function(a,c,e){function g(a){if(a.hasAttribute("editable"))return a;var b=a.getChildren(),c,d;for(d=0;d<b.count();d++){c=b.getItem(d);if(c.hasAttribute("editable")||(c=g(c)&&c.hasAttribute("editable")))return c}return a}function h(a){var c=null,e=null,f=this.editor.document.$,h;this.editor.focus(),typeof f.importNode=="undefined"&&b.assignCustomImportNode(f),e=f.importNode(a,!0),f.body.innerHTML="",f.body.appendChild(e),null===(c=this.editor.getSelection())&&(c=new d.dom.selection(this.editor.document)),c.selectElement(g(new d.dom.element(e)))}var f=this;if(d.dialog.getCurrent()!==null)return!1;typeof c=="function"&&(e=c),typeof a=="object"&&(c=a,a="image"),c&&h.call(f,c),this.editor.openDialog(a,function(a){typeof e=="function"&&e.call(f,a)})},hide:function(){var a=this.type;return f(this.pane).slideUp(150,function(){f(this).css("left","-1000px").show(),h&&a==h.getType()&&(h=null)}),this}},f(c).scroll(function(){m(h&&h.pane)}),{getInstance:function(a,b){return g[a]?(typeof b.loaded=="function"&&b.loaded.call(g[a]),typeof b.ready=="function"&&b.ready.call(g[a])):g[a]=new l(a,b),g[a]},getCurrent:function(){return h},setEditorOption:function(b,c){a[b]=c}}}return{init:c}}),c("plugins/links",["../util/dom"],function(a){var b,c;return c=function(a){this.editor=a,b("a[editable]").click(b.proxy(this.editLink,this))},c.prototype.editLink=function(a){function e(){var a=d.getSelectedElement.call(this,"a");return a}function f(){var a=e.call(this);b.updateLink(c,b.editor.window.document.importNode(a.$,!0))}function g(){this.removeListener("ok",f),this.removeListener("hide",g)}var b=this,c=a.target,d;a.preventDefault(),a.stopPropagation(),d=this.editor.getEditorPane("Inline",{ready:function(){this.showDialog("link",c,function(a){a.on("ok",f),a.on("hide",g,null,null,1)})}})},c.prototype.updateLink=function(c,d){var e=d.getAttribute("data-cke-saved-href")||d.getAttribute("href");c.setAttribute("href",e),a.updateAttribute(c,"class",d.getAttribute("class")),a.updateAttribute(c,"title",d.getAttribute("title")),a.updateAttribute(c,"style",b(d).attr("style")),this.editor.trigger("contentchanged.editor")},{register:function(a){typeof b=="undefined"&&(b=a.window.jQuery),new c(a)}}}),c("plugins/images",["../util/dom"],function(a){var b,c;return c=function(a){this.editor=a,this.editIcon=b('<img src="'+a.opts.root+'img/edit.png" alt="Rediger" />').addClass("mm-edit"),b("img[editable]").click(b.proxy(this.editImage,this)).hover(b.proxy(this.handleImageMouseOver,this),b.proxy(this.handleImageMouseOut,this))},c.prototype.editImage=function(c,d){function n(a){var b=this.originalElement,c=b.$.width/b.$.height,d=f[0].getAttribute("width"),e=f[0].getAttribute("height"),g=this.getContentElement("info","txtWidth"),h=this.getContentElement("info","txtHeight");j&&k?(this.lockRatio=!1,g.setValue(d),h.setValue(e)):j?(g.setValue(d),h.setValue(Math.round(d/c))):k&&(g.setValue(Math.round(e*c)),h.setValue(e)),setTimeout(function(){g.getInputElement().fire("keyup",new CKEDITOR.dom.event(a))},50)}function o(){var a=m.getSelectedElement.call(this,"img"),b=a.getParent().getName()==="a"?a.getParent():a;return b}function p(){var a=o.call(this);e.updateImage(i,a.$)}function q(a){if(j||k)this.originalElement.on("load",n,this,null,20),n.call(this,a);var c=f[0].getAttribute("src");c.length>1&&c.match("#$")!==null&&this.getContentElement("info","txtUrl").setValue("#"),h?this.getContentElement("Link","txtUrl").setValue(b(l).attr("href")):this.hidePage("Link"),this.hidePage("advanced")}function r(){(j||k)&&this.originalElement.removeListener("load",n),this.removeListener("ok",p),this.removeListener("show",q),this.removeListener("hide",r),this.showPage("Link"),this.showPage("advanced")}var e=this,f=b(d||c.target),g=f.parent(),h=g.is("a"),i=(h?g:f)[0],j=a.hasAttribute(f[0],"width"),k=a.hasAttribute(f[0],"height"),l=null,m;c.preventDefault(),c.stopPropagation(),h&&(l=i.cloneNode(!1),l.appendChild(i.getElementsByTagName("img").item(0).cloneNode(!1))),m=this.editor.getEditorPane("Inline",{ready:function(){e.hideImageEditIcon(),this.showDialog("image",l||i,function(a){a.on("ok",p),a.on("show",q),a.on("hide",r,null,null,1)})}})},c.prototype.updateImage=function(c,d){var e=d.nodeName.toLowerCase()==="a",f=e?b(d).find("img"):b(d),g=e?b(c).find("img"):b(c);this.cleanupImage(f[0],g[0]);if(e){var h=b(d).attr("href")||"";h.length>1&&h.substring(0,7)!="http://"&&(h="http://"+h),c.setAttribute("href",h),a.updateAttribute(c,"target",d.getAttribute("target")),g.attr("border","0")}b.each(["src","alt","width","height","align"],function(b,d){if((d=="width"||d=="height")&&!a.hasAttribute(c,d))return;var e=f[0].getAttribute(d);d=="align"&&e!==null&&g.css("float",e),a.updateAttribute(g[0],d,e)}),this.editor.trigger("contentchanged.editor")},c.prototype.cleanupImage=function(c,d){var e=b(c),f=e.attr("width")||e[0].naturalWidth,g=parseInt(e.css("width"),10),h=e.attr("height")||e[0].naturalHeight,i=parseInt(e.css("height"),10),j=e.css("float");d?!a.hasAttribute(d,"width")&&!a.hasAttribute(d,"height")?(c.setAttribute("width",g&&g>0?g:f),c.setAttribute("height",i&&i>0?i:h)):(a.hasAttribute(d,"width")?c.setAttribute("width",g&&g>0?g:f):(c.removeAttribute("width"),e.css("width","")),a.hasAttribute(d,"height")?c.setAttribute("height",i&&i>0?i:h):(c.removeAttribute("height"),e.css("height",""))):(a.hasAttribute(c,"width")||c.setAttribute("width",g&&g>0?g:f),a.hasAttribute(c,"height")||c.setAttribute("height",i&&i>0?i:h)),j=(j||"").toLowerCase(),(j=="right"||j=="left")&&c.setAttribute("align",j)},c.prototype.handleImageMouseOver=function(a){if(this.editor.getCurrentEditorPane()!==null)return!1;this.editIcon.data("relatedImage")!==a.target&&this.showImageEditIcon(a.target)},c.prototype.showImageEditIcon=function(a){var c=b(a),d=c.position(),e={left:d.left+4,top:d.top+4};c.addClass("hover"),this.editIcon.data("relatedImage",a).css(e).insertAfter(a).click(b.proxy(function(b){this.editImage(b,a),this.hideImageEditIcon()},this))},c.prototype.handleImageMouseOut=function(a){var c=b(a.target),d=b(a.toElement),e=c.offset(),f={width:c.width(),height:c.height()};if(d.is(".mm-edit")&&d.data("relatedImage")==this)return;(a.clientX<e.left||a.clientX>e.left+f.width||a.clientY<e.top||a.clientY>e.top+f.height)&&this.hideImageEditIcon()},c.prototype.hideImageEditIcon=function(){var a=b(this.editIcon.data("relatedImage"));a.removeClass("hover"),this.editIcon.data("relatedImage",null).remove()},{register:function(a){typeof b=="undefined"&&(b=a.window.jQuery),new c(a)}}}),c("util/type",[],function(){var a={},b=Object.prototype.hasOwnProperty,c,d;return c={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},d=function(a){return a===null?String(a):c[Object.prototype.toString.call(a)]||"object"},a.isArray=Array.isArray||function(a){return d(a)==="array"},a.isFunction=function(a){return d(a)==="function"},a.isPlainObject=function(c){if(!c||d(c)!=="object"||c.nodeType||a.isWindow(c))return!1;try{if(c.constructor&&!b.call(c,"constructor")&&!b.call(c.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var f;for(f in c);return f===undefined||b.call(c,f)},a.isWindow=function(a){return a&&typeof a=="object"&&"setInterval"in a},a.extend=function(){var b,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!a.isFunction(h)&&(h={});for(;i<j;i++)if((b=arguments[i])!=null)for(c in b){d=h[c],e=b[c];if(h===e)continue;k&&e&&(a.isPlainObject(e)||(f=a.isArray(e)))?(f?(f=!1,g=d&&a.isArray(d)?d:[]):g=d&&a.isPlainObject(d)?d:{},h[c]=a.extend(k,g,e)):e!==undefined&&(h[c]=e)}return h},a}),c("util/datetime",["./type"],function(a){var b,c,d,e,f,g;return c={days_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days_long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months_long:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"%m/%d/%Y"},d=c,e=function(a,b,c){a.a=d.days_short[c],a.A=d.days_long[c],a.b=d.months_short[b],a.B=d.months_long[b],a.m=b+1;var e;a.Y>0?(e=a.Y.toString(),e.length<2?e="0"+e:e.length>2&&(e=e.substring(e.length-2)),a.y=e):a.y=a.Y;var f=["d","m","H","M","S"];for(var g in f)e=a[f[g]],e=e.toString(),e.length<2&&(e="0"+e),a[f[g]]=e;return a.e<10&&(a.e=" "+a.e.toString()),a},f=function(a,b){var c,d,f;return b?(c={H:a.getUTCHours(),M:a.getUTCMinutes(),S:a.getUTCSeconds(),d:a.getUTCDate(),e:a.getUTCDate(),Y:a.getUTCFullYear()},d=a.getUTCMonth(),f=a.getUTCDay()):(c={H:a.getHours(),M:a.getMinutes(),S:a.getSeconds(),d:a.getDate(),e:a.getDate(),Y:a.getFullYear()},d=a.getMonth(),f=a.getDay()),e(c,d,f)},g=function(a){var b={H:0,M:0,S:0,d:1,e:1,Y:1,m:1},c={};for(var d in b)typeof a[d]!="number"||a[d]%1!=0?c[d]=b[d]:c[d]=a[d];c.m--;var f;return typeof a.dow=="number"&&a.dow%1==0?f=a.dow:f=0,e(c,c.m,f)},b=function(a,b,c){a&&typeof a=="object"&&(b=a.dateTime,c=a.utc,a=a.format);if(!a||typeof a!="string")a=d.format;var e;b&&typeof b=="object"?b instanceof Date?e=f(b,c):e=g(b):e=f(new Date,c);var h="",i=0;for(var j=0;j<a.length;j++)i==0?a.charAt(j)=="%"?i=1:h+=a.charAt(j):(typeof e[a.charAt(j)]!="undefined"?h+=e[a.charAt(j)]:(h+="%",a.charAt(j)!="%"&&(h+=a.charAt(j))),i=0);return i==1&&(h+="%"),h},b.setText=function(b){if(typeof b!="object")throw new Error("datetime.strftime.setText() : invalid parameter");var e=0;for(var f in b){if(typeof c[f]=="undefined")throw new Error('datetime.strftime.setText() : invalid field "'+f+'"');if(f=="format"&&typeof b[f]!="string")throw new Error('datetime.strftime.setText() : invalid type for the "format" field');if(f!="format"&&!a.isArray(b[f]))throw new Error('datetime.strftime.setText() : field "'+f+'" should be an array');if(b[f].length!=c[f].length)throw new Error('datetime.strftime.setText() : field "'+f+'" has incorrect length '+b[f].length+" (should be "+c[f].length+")");e++}if(e!=5)throw new Error("datetime.strftime.setText() : 5 fields expected, "+e+" found");d=b},b.defaults=function(){d=c},{strftime:b}}),c("plugins/dynamic_content",["locales","util/datetime"],function(a,b){function e(a,b){var c=a.getAttribute("on").toLowerCase();if(c!="facebook"&&c!="twitter")throw new Exception("Unknown share service.");this.serviceName=c,this.content=null,b&&(a.className="custom",this.content=$(a).contents().get())}function f(a){var b=a.childNodes,c=b.length;return c===0||c==1&&b[0].nodeValue&&b[0].nodeValue.match(/^\s*$/)}function g(c,d){var g=d.nodeName.toLowerCase().replace("mm:",""),h=f(d),i=null;switch(g){case"share":try{i=(new e(d,!h)).getButton(),i.style.cssText=d.style.cssText}catch(j){}break;case"date":var k=d.getAttribute("format"),l=d.getAttribute("lang")||"no";b.strftime.setText(a[l]),i=b.strftime(k);break;case"subject":i="[Emne kommer her]";break;case"from":i="[Avsendernavn kommer her]"}i&&(typeof i=="string"&&(i=document.createTextNode(i)),d.appendChild(i))}function h(a,b){var d=b.nodeName.toLowerCase().replace("mm:",""),e=c(b);switch(d){case"share":if(e.hasClass("custom")){var f=e.children("a");e.append(f.contents()),f.remove();break};case"date":case"subject":case"from":e.empty()}}var c,d="mm\\:date, date, mm\\:from, from, mm\\:subject, subject, mm\\:share, share";return e.prototype.getButton=function(){var a=c('<a href="#" />');return this.content!==null?a.append(this.content):this.serviceName=="facebook"?a.append('<img src="http://www.facebook.com/images/connect_favicon.png" border="0" width="14" height="14" />'):this.serviceName=="twitter"&&a.append('<img src="http://twitter-badges.s3.amazonaws.com/t_mini-a.png" border="0" width="16" height="16" />'),a[0]},{register:function(a){c=a.window.jQuery,c(d).each(g),a.on("filtercontent.editor",function(a,b){b.find(d).each(h)})}}}),c("plugins",["plugins/dynamic_content","plugins/editables","plugins/snippets","plugins/links","plugins/images"],function(a,b,c,d,e){return[a,b,c,d,e]}),c("util/url",[],function(){var a={};return a.concat=function(a,b){var c=a.substr(-1),d=b.substr(0,1);return c!=="/"&&d!=="/"?a+"/"+b:c==="/"&&d==="/"?a+b.substr(1):a+b},a.basePath=function(a){var b=a.lastIndexOf("/");return b!==-1?a.substr(0,b+1):""},a.isAbsolute=function(a){return a.substr(0,3)==="http"||a.substr(0,1)==="/"},a}),c("editor",["editor/panes","editor/ui","plugins","util/dom","util/type","util/url"],function(a,b,c,d,e,f){function g(a){var b=document.createElement("iframe"),c=null,d=a.value,e='<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" />\n';return d=d.replace(/<mm:(from|date|subject)([^>]*?)\s*\/>/gi,"<mm:$1$2></mm:$1>"),d=d.replace(/<head([^>]*)>/gi,"<head$1>\n"+e),b.style.width=a.offsetWidth+"px",b.style.height=a.offsetHeight+"px",a.style.display="none",a.parentNode.insertBefore(b,a),c=b.contentWindow.document,c.open(),c.write(d),c.close(),b}function h(a){var b=a.contentWindow.document,c=b.getElementsByTagName("head").item(0),d=b.createElement("meta");d.name="SKYPE_TOOLBAR",d.content="SKYPE_TOOLBAR_PARSER_COMPATIBLE",c.appendChild(d),b.body.innerHTML=b.body.innerHTML.replace(/<mm:(from|date|subject)([^>]*?)\s*\/>/gi,"<mm:$1$2></mm:$1>")}function i(){var a=document.getElementsByTagName("script"),b=a.length,c=0,d;for(;c<b;c++){if((d=a[c].getAttribute("src")||"").indexOf("mojoeditor")!==-1)return d=f.basePath(d),f.isAbsolute(d)||(d=f.concat(window.location.pathname,d)),d;if((d=a[c].getAttribute("data-main")||"")==="src/main")return f.concat(window.location.pathname,"/src/")}}var j=function(f,g){function h(a){function f(c){--e===0&&typeof a=="function"&&a.call(b)}var b=this,c=this.document.getElementsByTagName("head").item(0),e=2;d.injectStyleSheet(c,this.opts.root+"css/editor.css"),d.injectJavaScript(c,this.opts.ckeditor,f),d.injectJavaScript(c,this.opts.jquery,f)}function i(){var e=this,f=this.window.jQuery;this.panes=a.init(this.window),typeof g.imageUploadUrl!="undefined"&&this.panes.setEditorOption("filebrowserImageUploadUrl",g.imageUploadUrl),this.ui=b.init(this),typeof this.document.importNode=="undefined"&&d.assignCustomImportNode(this.document),f("a:not([editable])").live("click",function(a){a.preventDefault()}),f("form").live("submit",function(a){a.preventDefault()}),f.each(c,function(a,b){b.register(e)});if(this.listenerQueue.length>0){var h=0,i=this.listenerQueue.length;for(;h<i;h++)f(this.window).on(this.listenerQueue[h].e,this.listenerQueue[h].fn);delete this.listenerQueue}k.parentNode.removeChild(k),this.trigger("initialized.editor")}this.window=f.contentWindow,this.document=f.contentWindow.document,this.opts=e.extend({},j.defaults,g),this.listenerQueue=[],this.panes=null,this.ui={};var k=this.document.createElement("div"),l=this.document.createElement("div");k.setAttribute("style","position: absolute; left: 0; top: 0; z-index: 9999; background-color: #ffffff; background-color: rgba(255, 255, 255, 0.9)"),k.style.width=this.document.documentElement.offsetWidth+"px",k.style.height=this.document.documentElement.offsetHeight+"px",l.setAttribute("style","font: 13px Helvetica, Arial, sans-serif; color: #444444; text-align: center"),l.style.paddingTop=this.document.documentElement.offsetHeight/2-20+"px",l.appendChild(this.document.createTextNode("Laster inn editor...")),k.appendChild(l),this.document.body.appendChild(k),h.call(this,function(){i.call(this)})};return j.defaults={root:i(),ckeditor:"http://static.mailmojo/js/lib/ckeditor/ckeditor.js",jquery:"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"},j.prototype.handleSave=function(a,b){this.restore(b.getElement(),b.editor.getData()),this.trigger("contentchanged.editor")},j.prototype.handleCancel=function(a,b){this.restore(b.getElement())},j.prototype.restore=function(a,b){var c=this.window.jQuery,d=c(a);typeof b!="undefined"&&(d.html(b),this.cleanup(a))},j.prototype.cleanup=function(a){var b=this.window.jQuery(a);b.find("img").each(function(){})},j.prototype.toggleOverlay=function(a){a?this.window.jQuery("body").append(this.ui.overlay):this.ui.overlay.remove()},j.prototype.getEditorPane=function(a,b){var c=this;return b=b||{},this.panes.getInstance(a,{save:function(a,d){c.handleSave(a,d),typeof b.handleSave!="undefined"&&b.handleSave(c,d)},cancel:function(a,d){c.handleCancel(a,d),typeof b.handleCancel!="undefined"&&b.handleCancel(c,d)},ready:typeof b.ready!="undefined"?b.ready:null})},j.prototype.getCurrentEditorPane=function(){return this.panes.getCurrent()},j.prototype.getContent=function(){var a=this.window.jQuery,b=a(this.window.document).children().clone(!1),c=null,d="";return b=b.find("meta[name='SKYPE_TOOLBAR'], script, link").remove().end(),c=a("<div/>").append(b).find("div.mm-editor, div.mm-add, div.mm-overlay").remove().end().find("span.mm-edit, span.mm-remove").remove().end().find("img.mm-edit").remove().end().find("div[id^=cke_], div[class^=cke_]").remove().end(),this.trigger("filtercontent.editor",[c]),d=c.html(),a.browser.msie&&(d=d.replace(/<\?xml[^>]+>/gi,"")),d},j.prototype.on=function(a,b){return typeof this.listenerQueue=="undefined"?this.window.jQuery(this.window).on(a,b):this.listenerQueue.push({e:a,fn:b}),this},j.prototype.trigger=function(a){var b=this.window.jQuery(this.window),c=Array.prototype.slice.call(arguments);b.trigger.apply(b,c)},{init:function(a,b){return a.nodeName.toLowerCase()=="textarea"?a=g(a):h(a),new j(a,b)},addPlugin:function(a){if(!a.hasOwnProperty("register"))throw new Exception("Invalid plugin signature.");c.push(a)}}}),b.config({paths:{}}),c("main",["editor"],function(a){var b=this;b.MojoEditor=a})})()